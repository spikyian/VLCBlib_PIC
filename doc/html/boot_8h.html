<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VLCB library: boot.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">VLCB library<span id="projectnumber">&#160;1</span>
   </div>
   <div id="projectbrief">VLCB C library for PIC</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('boot_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">boot.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implementation of the VLCB BOOT service, supports the FCU and CBUS (PIC based) bootloading protocol.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="vlcb_8h_source.html">vlcb.h</a>&quot;</code><br />
</div>
<p><a href="boot_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a541ffa0eeac0560305207e19445a1d72" id="r_a541ffa0eeac0560305207e19445a1d72"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a541ffa0eeac0560305207e19445a1d72">_BOOT_H_</a></td></tr>
<tr class="separator:a541ffa0eeac0560305207e19445a1d72"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6a89fc238ad82ace7c465216a3e5575d" id="r_a6a89fc238ad82ace7c465216a3e5575d"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="struct_service.html">Service</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6a89fc238ad82ace7c465216a3e5575d">bootService</a></td></tr>
<tr class="separator:a6a89fc238ad82ace7c465216a3e5575d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of the VLCB BOOT service, supports the FCU and CBUS (PIC based) bootloading protocol. </p>
<p>The service definition object is called bootService. In order to be compatible with the FCU bootloader there are additional requirements for the parameter block which are actually supported by the MNS.</p>
<p>Application code packed with the bootloader must be compiled with options:</p><ul>
<li>XC8 linker options -&gt; Additional options &ndash;CODEOFFSET=0x800</li>
<li>This generates an error ::: warning: (2044) unrecognized option "--CODEOFFSET=0x800" but this can be ignored as the option works</li>
</ul>
<p>Then the Application project must be made dependent on the Bootloader project by adding the Bootloader to project properties-&gt;Conf:-&gt;Loading The project hex fill will have the .unified.hex extension.</p>
<h1><a class="anchor" id="autotoc_md0"></a>
Dependencies on other Services</h1>
<p>Although the Boot service does not depend upon any other services all modules must include the MNS service.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Module.h definitions required for the Boot service</h1>
<ul>
<li>#define BOOT_FLAG_ADDRESS This should be set to where the module's bootloader places the bootflag.</li>
<li>#define BOOT_FLAG_NVM_TYPE This should be set to be the type of NVM where the bootloader stores the boot flag. This can be set to be either EEPROM_NVM_TYPE or FLASH_NVM_TYPE. The PIC modules normally have this set to EEPROM_NVM_TYPE.</li>
<li>#define BOOTLOADER_PRESENT The module should define, as opposed to undefine, this to indicate that the application should be compiled to start at 0x800 to allow room for the bootloader between 0x000 and 0x7FF. </li>
</ul>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a541ffa0eeac0560305207e19445a1d72" name="a541ffa0eeac0560305207e19445a1d72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a541ffa0eeac0560305207e19445a1d72">&#9670;&#160;</a></span>_BOOT_H_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _BOOT_H_</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section copyright"><dt>Copyright</dt><dd>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License. </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Ian Hogg </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Dec 2022 </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a6a89fc238ad82ace7c465216a3e5575d" name="a6a89fc238ad82ace7c465216a3e5575d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a89fc238ad82ace7c465216a3e5575d">&#9670;&#160;</a></span>bootService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="struct_service.html">Service</a> bootService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The service descriptor for the BOOT service. The application must include this descriptor within the application's const <a class="el" href="struct_service.html">Service</a> * const services[] array and include the necessary settings within module.h in order to make use of the PIC bootloading service. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="boot_8h.html">boot.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
