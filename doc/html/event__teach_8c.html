<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VLCB library: event_teach.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">VLCB library<span id="projectnumber">&#160;1</span>
   </div>
   <div id="projectbrief">VLCB C library for PIC</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('event__teach_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">event_teach.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;xc.h&gt;</code><br />
<code>#include &quot;<a class="el" href="vlcb_8h_source.html">vlcb.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="romops_8h_source.html">romops.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mns_8h_source.html">mns.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="timed_response_8h_source.html">timedResponse.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="event__teach_8h_source.html">event_teach.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9ee96d4c65458b9529aeaa3de3ab8ab3"><td class="memItemLeft" align="right" valign="top">Processed&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__teach_8c.html#a9ee96d4c65458b9529aeaa3de3ab8ab3">checkLen</a> (<a class="el" href="struct_message.html">Message</a> *m, uint8_t needed)</td></tr>
<tr class="separator:a9ee96d4c65458b9529aeaa3de3ab8ab3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7afd0605b0c9b64d0aec16c7e8ac562c"><td class="memItemLeft" align="right" valign="top">TimedResponseResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__teach_8c.html#a7afd0605b0c9b64d0aec16c7e8ac562c">nerdCallback</a> (uint8_t type, uint8_t serviceIndex, uint8_t step)</td></tr>
<tr class="separator:a7afd0605b0c9b64d0aec16c7e8ac562c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a119c32fa845221e45656dcbc493732c5"><td class="memItemLeft" align="right" valign="top">TimedResponseResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__teach_8c.html#a119c32fa845221e45656dcbc493732c5">reqevCallback</a> (uint8_t type, uint8_t serviceIndex, uint8_t step)</td></tr>
<tr class="separator:a119c32fa845221e45656dcbc493732c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a722d9dbb962714dab2dbed9aee2cba"><td class="memItemLeft" align="right" valign="top">Boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__teach_8c.html#a4a722d9dbb962714dab2dbed9aee2cba">validStart</a> (uint8_t tableIndex)</td></tr>
<tr class="separator:a4a722d9dbb962714dab2dbed9aee2cba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ecc0cd4c43c7100796706b8b415d9fc"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__teach_8c.html#a0ecc0cd4c43c7100796706b8b415d9fc">getNN</a> (uint8_t tableIndex)</td></tr>
<tr class="separator:a0ecc0cd4c43c7100796706b8b415d9fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa1bcfeab543550146f0b9d15b4a1222"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__teach_8c.html#aaa1bcfeab543550146f0b9d15b4a1222">getEN</a> (uint8_t tableIndex)</td></tr>
<tr class="separator:aaa1bcfeab543550146f0b9d15b4a1222"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec14aa1580e747e31f46541a2bde4279"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__teach_8c.html#aec14aa1580e747e31f46541a2bde4279">numEv</a> (uint8_t tableIndex)</td></tr>
<tr class="separator:aec14aa1580e747e31f46541a2bde4279"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37e3faf0772321f16d80d7b2db753d92"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__teach_8c.html#a37e3faf0772321f16d80d7b2db753d92">getEv</a> (uint8_t tableIndex, uint8_t evNum)</td></tr>
<tr class="separator:a37e3faf0772321f16d80d7b2db753d92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef79de314cb4fdf348009d498ad5cbc6"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__teach_8c.html#aef79de314cb4fdf348009d498ad5cbc6">findEvent</a> (uint16_t nodeNumber, uint16_t eventNumber)</td></tr>
<tr class="separator:aef79de314cb4fdf348009d498ad5cbc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad66c29cafca265754d755a5129120df7"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__teach_8c.html#ad66c29cafca265754d755a5129120df7">writeEv</a> (uint8_t tableIndex, uint8_t evNum, uint8_t evVal)</td></tr>
<tr class="separator:ad66c29cafca265754d755a5129120df7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86e94e6b99175b437fb4fadc603e54a2"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__teach_8c.html#a86e94e6b99175b437fb4fadc603e54a2">removeEvent</a> (uint16_t nodeNumber, uint16_t eventNumber)</td></tr>
<tr class="separator:a86e94e6b99175b437fb4fadc603e54a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84842311410155eccc83819eaf8ee985"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__teach_8c.html#a84842311410155eccc83819eaf8ee985">addEvent</a> (uint16_t nodeNumber, uint16_t eventNumber, uint8_t evNum, uint8_t evVal, uint8_t forceOwnNN)</td></tr>
<tr class="separator:a84842311410155eccc83819eaf8ee985"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a275d5d58705f018ba8ea8a05477ba716"><td class="memItemLeft" align="right" valign="top"><a id="a275d5d58705f018ba8ea8a05477ba716" name="a275d5d58705f018ba8ea8a05477ba716"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>getEVs</b> (uint8_t tableIndex)</td></tr>
<tr class="separator:a275d5d58705f018ba8ea8a05477ba716"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a25dbd341349525d3b0917340575378b7"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="struct_service.html">Service</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__teach_8c.html#a25dbd341349525d3b0917340575378b7">eventTeachService</a></td></tr>
<tr class="separator:a25dbd341349525d3b0917340575378b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e104ea2eb5211e43dd69e1092a236a3"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="event__teach_8c.html#a5e104ea2eb5211e43dd69e1092a236a3">evs</a> [PARAM_NUM_EV_EVENT]</td></tr>
<tr class="separator:a5e104ea2eb5211e43dd69e1092a236a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section copyright"><dt>Copyright</dt><dd>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License. </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Pete Brownlow </dd>
<dd>
Ian Hogg </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Dec 2022</dd></dl>
<p>Implementation of the VLCB <a class="el" href="struct_event.html">Event</a> Teach service.</p>
<p><a class="el" href="struct_event.html">Event</a> teaching service The service definition object is called eventTeachService.</p>
<p>The events are stored as a hash table in flash (flash is faster to read than EEPROM) There can be up to 255 events. Since the address in the hash table will be 16 bits, and the address of the whole event table can also be covered by a 16 bit address, there is no advantage in having a separate hashed index table pointing to the actual event table. Therefore the hashing algorithm produces the index into the actual event table, which can be shifted to give the address - each event table entry is 16 bytes. After the event number and hash table overhead, this allows up to 10 EVs per event.</p>
<p>This generic code needs no knowledge of specific EV usage.</p>
<dl class="section warning"><dt>Warning</dt><dd>BEWARE must set NUM_EVENTS to a maximum of 255! If set to 256 then the for (uint8_t i=0; i&lt;NUM_EVENTS; i++) loops will never end as they use an uint8_t instead of int for space/performance reasons.</dd>
<dd>
BEWARE Concurrency: The functions which use the eventtable and hash/lookup must not be used whilst there is a chance of the functions which modify the eventtable of RAM based hash/lookup tables being called. These functions should therefore either be called from the same thread or disable interrupts.</dd></dl>
<p>define EVENT_HASH_TABLE to use event hash tables for fast access - at the expense of some RAM</p>
<p>The code is responsible for storing EVs for each defined event and also for allowing speedy lookup of EVs given an <a class="el" href="struct_event.html">Event</a> or finding an <a class="el" href="struct_event.html">Event</a> given a Happening which is stored in the first EVs. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a84842311410155eccc83819eaf8ee985" name="a84842311410155eccc83819eaf8ee985"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84842311410155eccc83819eaf8ee985">&#9670;&#160;</a></span>addEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t addEvent </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>nodeNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>eventNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>evNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>evVal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>forceOwnNN</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add an event/EV. Teach or re-teach an EV for an event. This may (optionally) need to create a new event and then optionally create additional chained entries. All newly allocated table entries need to be initialised.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nodeNumber</td><td><a class="el" href="struct_event.html">Event</a> NN </td></tr>
    <tr><td class="paramname">eventNumber</td><td><a class="el" href="struct_event.html">Event</a> NN </td></tr>
    <tr><td class="paramname">evNum</td><td>the EV index (starts at 0 for the produced action) </td></tr>
    <tr><td class="paramname">evVal</td><td>the EV value </td></tr>
    <tr><td class="paramname">forceOwnNN</td><td>the value of the flag </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error number or 0 for success </dd></dl>

</div>
</div>
<a id="a9ee96d4c65458b9529aeaa3de3ab8ab3" name="a9ee96d4c65458b9529aeaa3de3ab8ab3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ee96d4c65458b9529aeaa3de3ab8ab3">&#9670;&#160;</a></span>checkLen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Processed checkLen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_message.html">Message</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>needed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checks that the required number of message bytes are present. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>the message to be checked </td></tr>
    <tr><td class="paramname">needed</td><td>the number of bytes within the message needed including the opc </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PROCESSED if it is an invalid message and should not be processed further </dd></dl>

</div>
</div>
<a id="aef79de314cb4fdf348009d498ad5cbc6" name="aef79de314cb4fdf348009d498ad5cbc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef79de314cb4fdf348009d498ad5cbc6">&#9670;&#160;</a></span>findEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t findEvent </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>nodeNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>eventNumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Find an event in the event table and return its index.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nodeNumber</td><td>event NN </td></tr>
    <tr><td class="paramname">eventNumber</td><td>event EN </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>index into event table or NO_INDEX if not present </dd></dl>

</div>
</div>
<a id="aaa1bcfeab543550146f0b9d15b4a1222" name="aaa1bcfeab543550146f0b9d15b4a1222"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa1bcfeab543550146f0b9d15b4a1222">&#9670;&#160;</a></span>getEN()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t getEN </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tableIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the EN for an event. Getter so that the application code can obtain information about the event.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tableIndex</td><td>the index of the start of an event </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the <a class="el" href="struct_event.html">Event</a> Number </dd></dl>

</div>
</div>
<a id="a37e3faf0772321f16d80d7b2db753d92" name="a37e3faf0772321f16d80d7b2db753d92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37e3faf0772321f16d80d7b2db753d92">&#9670;&#160;</a></span>getEv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t getEv </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tableIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>evNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return an EV value for an event.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tableIndex</td><td>the index of the start of an event </td></tr>
    <tr><td class="paramname">evNum</td><td>ev number starts at 0 (Happening) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the ev value or -error code if error </dd></dl>

</div>
</div>
<a id="a0ecc0cd4c43c7100796706b8b415d9fc" name="a0ecc0cd4c43c7100796706b8b415d9fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ecc0cd4c43c7100796706b8b415d9fc">&#9670;&#160;</a></span>getNN()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t getNN </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tableIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the NN for an event. Getter so that the application code can obtain information about the event.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tableIndex</td><td>the index of the start of an event </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the Node Number </dd></dl>

</div>
</div>
<a id="a7afd0605b0c9b64d0aec16c7e8ac562c" name="a7afd0605b0c9b64d0aec16c7e8ac562c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7afd0605b0c9b64d0aec16c7e8ac562c">&#9670;&#160;</a></span>nerdCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TimedResponseResult nerdCallback </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>serviceIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>step</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The callback to do the NERD responses. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>the type of the timedResponse </td></tr>
    <tr><td class="paramname">serviceIndex</td><td>the service </td></tr>
    <tr><td class="paramname">step</td><td>how far through the processing </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether to finish or continue processing </dd></dl>

</div>
</div>
<a id="aec14aa1580e747e31f46541a2bde4279" name="aec14aa1580e747e31f46541a2bde4279"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec14aa1580e747e31f46541a2bde4279">&#9670;&#160;</a></span>numEv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t numEv </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tableIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the number of EVs for an event.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tableIndex</td><td>the index of the start of an event </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of EVs </dd></dl>

</div>
</div>
<a id="a86e94e6b99175b437fb4fadc603e54a2" name="a86e94e6b99175b437fb4fadc603e54a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86e94e6b99175b437fb4fadc603e54a2">&#9670;&#160;</a></span>removeEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t removeEvent </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>nodeNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>eventNumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove event.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nodeNumber</td><td><a class="el" href="struct_event.html">Event</a> NN </td></tr>
    <tr><td class="paramname">eventNumber</td><td><a class="el" href="struct_event.html">Event</a> EN </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error or 0 for success </dd></dl>

</div>
</div>
<a id="a119c32fa845221e45656dcbc493732c5" name="a119c32fa845221e45656dcbc493732c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a119c32fa845221e45656dcbc493732c5">&#9670;&#160;</a></span>reqevCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TimedResponseResult reqevCallback </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tableIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>serviceIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>step</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The callback to do the REQEV responses. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tableIndex</td><td>the index of the event in the eventTable </td></tr>
    <tr><td class="paramname">serviceIndex</td><td>the service </td></tr>
    <tr><td class="paramname">step</td><td>how far through the processing, considered to be an EV#-1 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether to finish or continue processing </dd></dl>

</div>
</div>
<a id="a4a722d9dbb962714dab2dbed9aee2cba" name="a4a722d9dbb962714dab2dbed9aee2cba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a722d9dbb962714dab2dbed9aee2cba">&#9670;&#160;</a></span>validStart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Boolean validStart </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tableIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checks if the specified index is the start of a set of linked entries.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tableIndex</td><td>the index into event table to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the specified index is the start of a linked set </dd></dl>

</div>
</div>
<a id="ad66c29cafca265754d755a5129120df7" name="ad66c29cafca265754d755a5129120df7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad66c29cafca265754d755a5129120df7">&#9670;&#160;</a></span>writeEv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t writeEv </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tableIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>evNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>evVal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write an EV value to an event.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tableIndex</td><td>the index into the event table </td></tr>
    <tr><td class="paramname">evNum</td><td>the EV number (0 for the produced action) </td></tr>
    <tr><td class="paramname">evVal</td><td>the EV value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if success otherwise the error </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a25dbd341349525d3b0917340575378b7" name="a25dbd341349525d3b0917340575378b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25dbd341349525d3b0917340575378b7">&#9670;&#160;</a></span>eventTeachService</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="struct_service.html">Service</a> eventTeachService</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    <a class="code hl_define" href="vlcb_8h.html#af8abe121e23ec14f76b80c8dec48924e">SERVICE_ID_TEACH</a>,      </div>
<div class="line">    1,                  </div>
<div class="line">    teachFactoryReset,  </div>
<div class="line">    teachPowerUp,       </div>
<div class="line">    teachProcessMessage,</div>
<div class="line">    NULL,               </div>
<div class="line">    NULL,               </div>
<div class="line">    NULL,               </div>
<div class="line">    teachGetESDdata,    </div>
<div class="line">    NULL                </div>
<div class="line">}</div>
<div class="ttc" id="avlcb_8h_html_af8abe121e23ec14f76b80c8dec48924e"><div class="ttname"><a href="vlcb_8h.html#af8abe121e23ec14f76b80c8dec48924e">SERVICE_ID_TEACH</a></div><div class="ttdeci">#define SERVICE_ID_TEACH</div><div class="ttdoc">Event teaching service.</div><div class="ttdef"><b>Definition:</b> vlcb.h:62</div></div>
</div><!-- fragment --><p>The service descriptor for the event teach service. The application must include this descriptor within the const <a class="el" href="struct_service.html">Service</a> * const services[] array and include the necessary settings within module.h in order to make use of the event teach service. </p>

</div>
</div>
<a id="a5e104ea2eb5211e43dd69e1092a236a3" name="a5e104ea2eb5211e43dd69e1092a236a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e104ea2eb5211e43dd69e1092a236a3">&#9670;&#160;</a></span>evs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t evs[PARAM_NUM_EV_EVENT]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return all the EV values for an event. EVs are put into the global evs array.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tableIndex</td><td>the index of the start of an event </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the error code or 0 for no error </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="event__teach_8c.html">event_teach.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
