<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: C:/Users/ianwh/github/VLCBlib_PIC/nvm.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
   <div id="projectbrief">VLCB library for PIC</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">C:/Users/ianwh/github/VLCBlib_PIC/nvm.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Non volatile memory functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;xc.h&gt;</code><br />
<code>#include &quot;<a class="el" href="vlcb_8h_source.html">vlcb.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hardware_8h_source.html">hardware.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nvm_8h_source.html">nvm.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mns_8h_source.html">mns.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5192c5aa585bcfcb8fca69c105ab74d3" id="r_a5192c5aa585bcfcb8fca69c105ab74d3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5192c5aa585bcfcb8fca69c105ab74d3">NVMCMD_READ</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="separator:a5192c5aa585bcfcb8fca69c105ab74d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f7e1737dd2d1e68a2b42f3c31c220c4" id="r_a9f7e1737dd2d1e68a2b42f3c31c220c4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9f7e1737dd2d1e68a2b42f3c31c220c4">NVMCMD_READ_POSTINC</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:a9f7e1737dd2d1e68a2b42f3c31c220c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac21881f9bf0f6c7f52e952e5bf206050" id="r_ac21881f9bf0f6c7f52e952e5bf206050"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac21881f9bf0f6c7f52e952e5bf206050">NVMCMD_READPAGE</a>&#160;&#160;&#160;0x02</td></tr>
<tr class="separator:ac21881f9bf0f6c7f52e952e5bf206050"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6842bd21662aff3dad9c6f2243eca598" id="r_a6842bd21662aff3dad9c6f2243eca598"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6842bd21662aff3dad9c6f2243eca598">NVMCMD_WRITE</a>&#160;&#160;&#160;0x03</td></tr>
<tr class="separator:a6842bd21662aff3dad9c6f2243eca598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17a0ea290c8e88670a2947a9c8ddeda7" id="r_a17a0ea290c8e88670a2947a9c8ddeda7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a17a0ea290c8e88670a2947a9c8ddeda7">NVMCMD_WRITE_POSTINC</a>&#160;&#160;&#160;0x04</td></tr>
<tr class="separator:a17a0ea290c8e88670a2947a9c8ddeda7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a563ac478b3b1ecd286e7f1236c8c7b15" id="r_a563ac478b3b1ecd286e7f1236c8c7b15"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a563ac478b3b1ecd286e7f1236c8c7b15">NVMCMD_WRITEPAGE</a>&#160;&#160;&#160;0x05</td></tr>
<tr class="separator:a563ac478b3b1ecd286e7f1236c8c7b15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37b6cf1b75e0bcb6d3baae7b04525909" id="r_a37b6cf1b75e0bcb6d3baae7b04525909"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a37b6cf1b75e0bcb6d3baae7b04525909">NVMCMD_ERASEPAGE</a>&#160;&#160;&#160;0x06</td></tr>
<tr class="separator:a37b6cf1b75e0bcb6d3baae7b04525909"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad29fab7c9593aeccca62b1f5af919c83" id="r_ad29fab7c9593aeccca62b1f5af919c83"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad29fab7c9593aeccca62b1f5af919c83">NVMCMD_NOP</a>&#160;&#160;&#160;0x07</td></tr>
<tr class="separator:ad29fab7c9593aeccca62b1f5af919c83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8b4481f7d97c22165b8895a205e934e" id="r_ab8b4481f7d97c22165b8895a205e934e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab8b4481f7d97c22165b8895a205e934e">BLOCK</a>(A)&#160;&#160;&#160;(A&amp;(~((flash_address_t)FLASH_PAGE_SIZE-1)))</td></tr>
<tr class="separator:ab8b4481f7d97c22165b8895a205e934e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e15205a53bddef5c5a3cb650dfd9c84" id="r_a9e15205a53bddef5c5a3cb650dfd9c84"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9e15205a53bddef5c5a3cb650dfd9c84">OFFSET</a>(A)&#160;&#160;&#160;(A&amp;(FLASH_PAGE_SIZE-1))</td></tr>
<tr class="separator:a9e15205a53bddef5c5a3cb650dfd9c84"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a02557928852521f6abecc4d65c6ba12b" id="r_a02557928852521f6abecc4d65c6ba12b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a02557928852521f6abecc4d65c6ba12b">initRomOps</a> (void)</td></tr>
<tr class="separator:a02557928852521f6abecc4d65c6ba12b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83fd3efd9c767d1e104201737183f86c" id="r_a83fd3efd9c767d1e104201737183f86c"><td class="memItemLeft" align="right" valign="top">eeprom_data_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a83fd3efd9c767d1e104201737183f86c">EEPROM_Read</a> (eeprom_address_t index)</td></tr>
<tr class="separator:a83fd3efd9c767d1e104201737183f86c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1c1c8896c08e933c0b0288601683c16" id="r_ab1c1c8896c08e933c0b0288601683c16"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab1c1c8896c08e933c0b0288601683c16">EEPROM_Write</a> (eeprom_address_t index, eeprom_data_t value)</td></tr>
<tr class="separator:ab1c1c8896c08e933c0b0288601683c16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad706a6efd747d4b880e464968e1cce6" id="r_aad706a6efd747d4b880e464968e1cce6"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aad706a6efd747d4b880e464968e1cce6">EEPROM_WriteNoVerify</a> (eeprom_address_t index, eeprom_data_t value)</td></tr>
<tr class="separator:aad706a6efd747d4b880e464968e1cce6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46652625f2e3b0fbd1c2a00a3ef8c5a2" id="r_a46652625f2e3b0fbd1c2a00a3ef8c5a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a46652625f2e3b0fbd1c2a00a3ef8c5a2">eraseFlashBlock</a> (void)</td></tr>
<tr class="separator:a46652625f2e3b0fbd1c2a00a3ef8c5a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fcdc24440e40c3ff3cded548b912008" id="r_a0fcdc24440e40c3ff3cded548b912008"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0fcdc24440e40c3ff3cded548b912008">flushFlashBlock</a> (void)</td></tr>
<tr class="separator:a0fcdc24440e40c3ff3cded548b912008"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1649c85b55bfaa99f3994be0c632b48" id="r_ad1649c85b55bfaa99f3994be0c632b48"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad1649c85b55bfaa99f3994be0c632b48">loadFlashBlock</a> (void)</td></tr>
<tr class="separator:ad1649c85b55bfaa99f3994be0c632b48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f1087c4219e98e3c6482ee7e51d9dd3" id="r_a5f1087c4219e98e3c6482ee7e51d9dd3"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5f1087c4219e98e3c6482ee7e51d9dd3">FLASH_Write</a> (flash_address_t index, flash_data_t value)</td></tr>
<tr class="separator:a5f1087c4219e98e3c6482ee7e51d9dd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c179e5ce4a0973b69dab3e12edc0eb3" id="r_a6c179e5ce4a0973b69dab3e12edc0eb3"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c179e5ce4a0973b69dab3e12edc0eb3">writeNVM</a> (<a class="el" href="nvm_8h.html#a4edc8ede417a683709eaaf0ed26f441e">NVMtype</a> <a class="el" href="boot_8c.html#ac2be0627bea289e008d468b07b24bda9">type</a>, uint24_t index, uint8_t value)</td></tr>
<tr class="separator:a6c179e5ce4a0973b69dab3e12edc0eb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b5c8c0d5034f4598a4933db88ac3ba2" id="r_a0b5c8c0d5034f4598a4933db88ac3ba2"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0b5c8c0d5034f4598a4933db88ac3ba2">readNVM</a> (<a class="el" href="nvm_8h.html#a4edc8ede417a683709eaaf0ed26f441e">NVMtype</a> <a class="el" href="boot_8c.html#ac2be0627bea289e008d468b07b24bda9">type</a>, uint24_t index)</td></tr>
<tr class="separator:a0b5c8c0d5034f4598a4933db88ac3ba2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Non volatile memory functions. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License. </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Original CANACC8 assembler version (c) Mike Bolton </dd>
<dd>
Modifications to EEPROM routines and conversion to C18 (c) Andrew Crosland </dd>
<dd>
FLASH routines by (c) Chuck Hoelzen </dd>
<dd>
Modifications, refinements &amp; combine EEPROM and FLASH into one module (C) Pete Brownlow 2014-2017 <a href="#" onclick="location.href='mai'+'lto:'+'sof'+'tw'+'are'+'@u'+'psy'+'s.'+'co'; return false;">softw<span class="obfuscator">.nosp@m.</span>are@<span class="obfuscator">.nosp@m.</span>upsys<span class="obfuscator">.nosp@m.</span>.co</a>.u </dd>
<dd>
Major rewrite Ian Hogg <br  />
 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Dec 2022</dd></dl>
<p>EEPROM read and write are straightforward since the PIC offers byte read and write access to the EEPROM so these routines just provide the necessary functionality and register access and write unlocking.</p>
<p>Flash read is also done using the PIC reading of a single byte of flash.</p>
<p>Flashing writing is complicated due to the PIC only supporting page writes and bits can only be cleared. If any bit needs to be set then the entire page needs to be erased. To do this a RAM buffer is used to hold the current page's contents. Writing a byte to Flash involves checking if the current page in the buffer is the correct page for the byte to be written, if it is not then the current page may need to be flushed out before the correct page is read in and the byte modified. To flush the page then the buffer needs to be checked to see if it is dirty (been modified). If the buffer is dirty and bits have been cleared then the page first needs to be erased before the whole page is is written.</p>
<p>Functionality for reading and writing to EEPROM and Flash NVM. Read and write to EEPROM is straightforward. Reading from flash is also straightforward but writing to flash is complex. This involves needing to erase a block if changing any bit from 0 to 1 and if changing a single byte the entire block must be read, the byte changed and the entire block written back. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ab8b4481f7d97c22165b8895a205e934e" name="ab8b4481f7d97c22165b8895a205e934e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8b4481f7d97c22165b8895a205e934e">&#9670;&#160;</a></span>BLOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BLOCK</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname">A</span></td><td>)</td>
          <td>&#160;&#160;&#160;(A&amp;(~((flash_address_t)FLASH_PAGE_SIZE-1)))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Provides the Flash Block number given an address. </p>

</div>
</div>
<a id="a37b6cf1b75e0bcb6d3baae7b04525909" name="a37b6cf1b75e0bcb6d3baae7b04525909"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37b6cf1b75e0bcb6d3baae7b04525909">&#9670;&#160;</a></span>NVMCMD_ERASEPAGE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NVMCMD_ERASEPAGE&#160;&#160;&#160;0x06</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad29fab7c9593aeccca62b1f5af919c83" name="ad29fab7c9593aeccca62b1f5af919c83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad29fab7c9593aeccca62b1f5af919c83">&#9670;&#160;</a></span>NVMCMD_NOP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NVMCMD_NOP&#160;&#160;&#160;0x07</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5192c5aa585bcfcb8fca69c105ab74d3" name="a5192c5aa585bcfcb8fca69c105ab74d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5192c5aa585bcfcb8fca69c105ab74d3">&#9670;&#160;</a></span>NVMCMD_READ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NVMCMD_READ&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9f7e1737dd2d1e68a2b42f3c31c220c4" name="a9f7e1737dd2d1e68a2b42f3c31c220c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f7e1737dd2d1e68a2b42f3c31c220c4">&#9670;&#160;</a></span>NVMCMD_READ_POSTINC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NVMCMD_READ_POSTINC&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac21881f9bf0f6c7f52e952e5bf206050" name="ac21881f9bf0f6c7f52e952e5bf206050"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac21881f9bf0f6c7f52e952e5bf206050">&#9670;&#160;</a></span>NVMCMD_READPAGE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NVMCMD_READPAGE&#160;&#160;&#160;0x02</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6842bd21662aff3dad9c6f2243eca598" name="a6842bd21662aff3dad9c6f2243eca598"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6842bd21662aff3dad9c6f2243eca598">&#9670;&#160;</a></span>NVMCMD_WRITE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NVMCMD_WRITE&#160;&#160;&#160;0x03</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a17a0ea290c8e88670a2947a9c8ddeda7" name="a17a0ea290c8e88670a2947a9c8ddeda7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17a0ea290c8e88670a2947a9c8ddeda7">&#9670;&#160;</a></span>NVMCMD_WRITE_POSTINC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NVMCMD_WRITE_POSTINC&#160;&#160;&#160;0x04</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a563ac478b3b1ecd286e7f1236c8c7b15" name="a563ac478b3b1ecd286e7f1236c8c7b15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a563ac478b3b1ecd286e7f1236c8c7b15">&#9670;&#160;</a></span>NVMCMD_WRITEPAGE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NVMCMD_WRITEPAGE&#160;&#160;&#160;0x05</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9e15205a53bddef5c5a3cb650dfd9c84" name="a9e15205a53bddef5c5a3cb650dfd9c84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e15205a53bddef5c5a3cb650dfd9c84">&#9670;&#160;</a></span>OFFSET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname">A</span></td><td>)</td>
          <td>&#160;&#160;&#160;(A&amp;(FLASH_PAGE_SIZE-1))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Provides the offset into a Flash Block given an address. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a83fd3efd9c767d1e104201737183f86c" name="a83fd3efd9c767d1e104201737183f86c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83fd3efd9c767d1e104201737183f86c">&#9670;&#160;</a></span>EEPROM_Read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eeprom_data_t EEPROM_Read </td>
          <td>(</td>
          <td class="paramtype">eeprom_address_t</td>          <td class="paramname"><span class="paramname"><em>index</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read EEPROM. <br  />
 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>the address </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the value </dd></dl>

</div>
</div>
<a id="ab1c1c8896c08e933c0b0288601683c16" name="ab1c1c8896c08e933c0b0288601683c16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1c1c8896c08e933c0b0288601683c16">&#9670;&#160;</a></span>EEPROM_Write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t EEPROM_Write </td>
          <td>(</td>
          <td class="paramtype">eeprom_address_t</td>          <td class="paramname"><span class="paramname"><em>index</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">eeprom_data_t</td>          <td class="paramname"><span class="paramname"><em>value</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write a byte to EEPROM </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>the address </td></tr>
    <tr><td class="paramname">value</td><td>the value to be written </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success or error otherwise </dd></dl>

</div>
</div>
<a id="aad706a6efd747d4b880e464968e1cce6" name="aad706a6efd747d4b880e464968e1cce6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad706a6efd747d4b880e464968e1cce6">&#9670;&#160;</a></span>EEPROM_WriteNoVerify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t EEPROM_WriteNoVerify </td>
          <td>(</td>
          <td class="paramtype">eeprom_address_t</td>          <td class="paramname"><span class="paramname"><em>index</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">eeprom_data_t</td>          <td class="paramname"><span class="paramname"><em>value</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write a byte to EEPROM without verification </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>the address </td></tr>
    <tr><td class="paramname">value</td><td>the value to be written </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success or error otherwise </dd></dl>

</div>
</div>
<a id="a46652625f2e3b0fbd1c2a00a3ef8c5a2" name="a46652625f2e3b0fbd1c2a00a3ef8c5a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46652625f2e3b0fbd1c2a00a3ef8c5a2">&#9670;&#160;</a></span>eraseFlashBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eraseFlashBlock </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Erase a block of flash. May block awaiting for the application to indicate that it is a suitable time to allow the CPU to be halted. </p>

</div>
</div>
<a id="a5f1087c4219e98e3c6482ee7e51d9dd3" name="a5f1087c4219e98e3c6482ee7e51d9dd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f1087c4219e98e3c6482ee7e51d9dd3">&#9670;&#160;</a></span>FLASH_Write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t FLASH_Write </td>
          <td>(</td>
          <td class="paramtype">flash_address_t</td>          <td class="paramname"><span class="paramname"><em>index</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">flash_data_t</td>          <td class="paramname"><span class="paramname"><em>value</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write a byte to Flash. May block awaiting for the application to indicate that it is a suitable time to allow the CPU to be halted. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>the address </td></tr>
    <tr><td class="paramname">value</td><td>the value to be written </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success or error otherwise </dd></dl>

</div>
</div>
<a id="a0fcdc24440e40c3ff3cded548b912008" name="a0fcdc24440e40c3ff3cded548b912008"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fcdc24440e40c3ff3cded548b912008">&#9670;&#160;</a></span>flushFlashBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void flushFlashBlock </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flush the current flash buffer out to flash. Will suspend the CPU. </p>

</div>
</div>
<a id="a02557928852521f6abecc4d65c6ba12b" name="a02557928852521f6abecc4d65c6ba12b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02557928852521f6abecc4d65c6ba12b">&#9670;&#160;</a></span>initRomOps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initRomOps </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialise variables for Flash program tracking. </p>

</div>
</div>
<a id="ad1649c85b55bfaa99f3994be0c632b48" name="ad1649c85b55bfaa99f3994be0c632b48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1649c85b55bfaa99f3994be0c632b48">&#9670;&#160;</a></span>loadFlashBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loadFlashBlock </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Load an entire block of flash into the flash buffer. </p>

</div>
</div>
<a id="a0b5c8c0d5034f4598a4933db88ac3ba2" name="a0b5c8c0d5034f4598a4933db88ac3ba2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b5c8c0d5034f4598a4933db88ac3ba2">&#9670;&#160;</a></span>readNVM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t readNVM </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="nvm_8h.html#a4edc8ede417a683709eaaf0ed26f441e">NVMtype</a></td>          <td class="paramname"><span class="paramname"><em>type</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint24_t</td>          <td class="paramname"><span class="paramname"><em>index</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a single byte of NVM. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>the type of memory to be accessed </td></tr>
    <tr><td class="paramname">index</td><td>the address </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the value if &gt;=0, -error otherwise </dd></dl>

</div>
</div>
<a id="a6c179e5ce4a0973b69dab3e12edc0eb3" name="a6c179e5ce4a0973b69dab3e12edc0eb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c179e5ce4a0973b69dab3e12edc0eb3">&#9670;&#160;</a></span>writeNVM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t writeNVM </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="nvm_8h.html#a4edc8ede417a683709eaaf0ed26f441e">NVMtype</a></td>          <td class="paramname"><span class="paramname"><em>type</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint24_t</td>          <td class="paramname"><span class="paramname"><em>index</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>value</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write a single byte to NVM. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>the type of memory to access </td></tr>
    <tr><td class="paramname">index</td><td>the memory address </td></tr>
    <tr><td class="paramname">value</td><td>the value to be written </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, error otherwise </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aada9536de6acc6e1c85bf6c0e1fdf423" name="aada9536de6acc6e1c85bf6c0e1fdf423"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aada9536de6acc6e1c85bf6c0e1fdf423">&#9670;&#160;</a></span>asByte</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t asByte</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac82558731733c0d9bc0fc95a8da77568" name="ac82558731733c0d9bc0fc95a8da77568"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac82558731733c0d9bc0fc95a8da77568">&#9670;&#160;</a></span>eraseNeeded</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t eraseNeeded</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad126b8bcd38e8887ba014ea73ab70cd2" name="ad126b8bcd38e8887ba014ea73ab70cd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad126b8bcd38e8887ba014ea73ab70cd2">&#9670;&#160;</a></span>writeNeeded</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t writeNeeded</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
