<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: C:/Users/ianwh/github/VLCBlib_PIC/boot.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
   <div id="projectbrief">VLCB library for PIC</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">C:/Users/ianwh/github/VLCBlib_PIC/boot.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implementation of the VLCB BOOT service, supports the FCU and CBUS (PIC based) bootloading protocol.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;xc.h&gt;</code><br />
<code>#include &quot;<a class="el" href="vlcb_8h_source.html">vlcb.h</a>&quot;</code><br />
<code>#include &quot;module.h&quot;</code><br />
<code>#include &quot;<a class="el" href="boot_8h_source.html">boot.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mns_8h_source.html">mns.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a4bf7215e292095e0ab4521e7314cb7f8" id="r_a4bf7215e292095e0ab4521e7314cb7f8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4bf7215e292095e0ab4521e7314cb7f8">PRM_CKSUM1</a></td></tr>
<tr class="separator:a4bf7215e292095e0ab4521e7314cb7f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcde0871dc4a6f660a1be9ec3fbc4924" id="r_abcde0871dc4a6f660a1be9ec3fbc4924"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abcde0871dc4a6f660a1be9ec3fbc4924">PRM_CKSUM2</a>&#160;&#160;&#160;<a class="el" href="#a4bf7215e292095e0ab4521e7314cb7f8">PRM_CKSUM1</a></td></tr>
<tr class="separator:abcde0871dc4a6f660a1be9ec3fbc4924"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfbe4243816f079d2f0a97ea29c2db6a" id="r_adfbe4243816f079d2f0a97ea29c2db6a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adfbe4243816f079d2f0a97ea29c2db6a">PRM_CKSUM3</a>&#160;&#160;&#160;<a class="el" href="#abcde0871dc4a6f660a1be9ec3fbc4924">PRM_CKSUM2</a></td></tr>
<tr class="separator:adfbe4243816f079d2f0a97ea29c2db6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c270237a8aff6430e17f048b26f03f5" id="r_a4c270237a8aff6430e17f048b26f03f5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c270237a8aff6430e17f048b26f03f5">PRM_CKSUM4</a>&#160;&#160;&#160;<a class="el" href="#adfbe4243816f079d2f0a97ea29c2db6a">PRM_CKSUM3</a></td></tr>
<tr class="separator:a4c270237a8aff6430e17f048b26f03f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e483116b4789b4222bc201dc85c7548" id="r_a3e483116b4789b4222bc201dc85c7548"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3e483116b4789b4222bc201dc85c7548">PRM_CKSUM6</a>&#160;&#160;&#160;PRM_CKSUM5</td></tr>
<tr class="separator:a3e483116b4789b4222bc201dc85c7548"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6a89fc238ad82ace7c465216a3e5575d" id="r_a6a89fc238ad82ace7c465216a3e5575d"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="struct_service.html">Service</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6a89fc238ad82ace7c465216a3e5575d">bootService</a></td></tr>
<tr class="separator:a6a89fc238ad82ace7c465216a3e5575d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2be0627bea289e008d468b07b24bda9" id="r_ac2be0627bea289e008d468b07b24bda9"><td class="memItemLeft" align="right" valign="top">Error unrecognised CPU&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac2be0627bea289e008d468b07b24bda9">type</a></td></tr>
<tr class="separator:ac2be0627bea289e008d468b07b24bda9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of the VLCB BOOT service, supports the FCU and CBUS (PIC based) bootloading protocol. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License. </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Ian Hogg </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Dec 2022</dd></dl>
<p>The service definition object is called bootService. In order to be compatible with the FCU bootloader there are additional requirements for the parameter block which are actually supported by the MNS.</p>
<p>Application code packed with the bootloader must be compiled with options:</p><ul>
<li>XC8 linker options -&gt; Additional options &ndash;CODEOFFSET=0x800</li>
<li>This generates an error ::: warning: (2044) unrecognized option "--CODEOFFSET=0x800" but this can be ignored as the option works.</li>
</ul>
<p>Then the Application project must be made dependent on the Bootloader project by adding the Bootloader to project properties-&gt;Conf:-&gt;Loading The project hex fill will have the .unified.hex extension. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a4bf7215e292095e0ab4521e7314cb7f8" name="a4bf7215e292095e0ab4521e7314cb7f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bf7215e292095e0ab4521e7314cb7f8">&#9670;&#160;</a></span>PRM_CKSUM1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PRM_CKSUM1</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    PARAM_MANU+PARAM_MINOR_VERSION+PARAM_MODULE_ID+PARAM_NUM_EVENTS\</div>
<div class="line">    +PARAM_NUM_EV_EVENT+PARAM_NUM_NV+PARAM_MAJOR_VERSION+(8)\</div>
<div class="line">    +(8)+CPUM_MICROCHIP+PARAM_BUILD_VERSION\</div>
<div class="line">    +(20)+(0x48)+(0x08)</div>
</div><!-- fragment --><p>Used internally for calculating checksum. <br  />
 </p>

</div>
</div>
<a id="abcde0871dc4a6f660a1be9ec3fbc4924" name="abcde0871dc4a6f660a1be9ec3fbc4924"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcde0871dc4a6f660a1be9ec3fbc4924">&#9670;&#160;</a></span>PRM_CKSUM2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PRM_CKSUM2&#160;&#160;&#160;<a class="el" href="#a4bf7215e292095e0ab4521e7314cb7f8">PRM_CKSUM1</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Used internally for calculating checksum. <br  />
 </p>

</div>
</div>
<a id="adfbe4243816f079d2f0a97ea29c2db6a" name="adfbe4243816f079d2f0a97ea29c2db6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfbe4243816f079d2f0a97ea29c2db6a">&#9670;&#160;</a></span>PRM_CKSUM3</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PRM_CKSUM3&#160;&#160;&#160;<a class="el" href="#abcde0871dc4a6f660a1be9ec3fbc4924">PRM_CKSUM2</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Used internally for calculating checksum. <br  />
 </p>

</div>
</div>
<a id="a4c270237a8aff6430e17f048b26f03f5" name="a4c270237a8aff6430e17f048b26f03f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c270237a8aff6430e17f048b26f03f5">&#9670;&#160;</a></span>PRM_CKSUM4</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PRM_CKSUM4&#160;&#160;&#160;<a class="el" href="#adfbe4243816f079d2f0a97ea29c2db6a">PRM_CKSUM3</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Used internally for calculating checksum. <br  />
 </p>

</div>
</div>
<a id="a3e483116b4789b4222bc201dc85c7548" name="a3e483116b4789b4222bc201dc85c7548"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e483116b4789b4222bc201dc85c7548">&#9670;&#160;</a></span>PRM_CKSUM6</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PRM_CKSUM6&#160;&#160;&#160;PRM_CKSUM5</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Used internally for calculating checksum. <br  />
 </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a6a89fc238ad82ace7c465216a3e5575d" name="a6a89fc238ad82ace7c465216a3e5575d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a89fc238ad82ace7c465216a3e5575d">&#9670;&#160;</a></span>bootService</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="struct_service.html">Service</a> bootService</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    SERVICE_ID_BOOT,    </div>
<div class="line">    3,                  </div>
<div class="line">    NULL,               </div>
<div class="line">    bootPowerUp,        </div>
<div class="line">    bootProcessMessage, </div>
<div class="line">    NULL,               </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><p>The service descriptor for the BOOT service. The application must include this descriptor within the application's const <a class="el" href="struct_service.html">Service</a> * const services[] array and include the necessary settings within module.h in order to make use of the PIC bootloading service. </p>

</div>
</div>
<a id="ac2be0627bea289e008d468b07b24bda9" name="ac2be0627bea289e008d468b07b24bda9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2be0627bea289e008d468b07b24bda9">&#9670;&#160;</a></span>type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Error unrecognised CPU type</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
